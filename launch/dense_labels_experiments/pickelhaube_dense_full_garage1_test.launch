<?xml version="1.0" encoding="utf-8"?>
<!--
Launch file for Selective ICP with rviz and Realsense integration
-->

<launch>
	<arg name="rosbag_folder" default="$(find background_foreground_segmentation)/rosbags" />
	<include file="$(find background_foreground_segmentation)/launch/distributed/pickelhaube2_dense_full.launch">
		<arg name="rosbag" value="$(arg rosbag_folder)/2021-05-20-15-49-34_garage1.bag"/>
		<arg name="cad_file" value="$(find cpt_selective_icp)/resources/CLA_CAD_simplified_single_wall_no_ceiling.off" />
		<arg name="logprefix" value="pickelhaube_dense_full_test" />
	</include>

    <node pkg="tf2_ros"
	      type="static_transform_publisher"
		  name="mesh_positioning"
		  args="0 0 0 0 0 0 1 map marker" />
    <node pkg="rosservice"
	      type="rosservice"
		  name="start_icp"
		  args="call --wait /mapper/load_published_map"
		  launch-prefix="bash -c 'sleep 2; $0 $@'" />
	<node pkg="rosservice"
	      type="rosservice"
		  name="start_cloud_distance"
		  args="call --wait /load_published_map"
		  launch-prefix="bash -c 'sleep 2; $0 $@'" />

</launch>

    <!-- <node pkg="tf2_ros" -8 17.3  (120)
	      type="static_transform_publisher"
		  name="mesh_positioning"
		  args="-0.909 -15.024 0 0 0 -0.691 0.723 map marker" 
		  "-11.11 19.5 0 0 0 0.8660254, 0.5 map marker"/> -->