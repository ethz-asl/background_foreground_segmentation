Notebooks used to generate results:

[Trajectory - Viconroom](https://github.com/ethz-asl/background_foreground_segmentation/blob/zrene/stateForResults/notebooks/evaluate_trajectory_vicon.ipynb)

[Trajectory - CLA]([https://github.com/ethz-asl/background_foreground_segmentation/blob/zrene/stateForResults/notebooks/trajecotry_eval_cla.ipynb)

[Visual Results](https://github.com/ethz-asl/background_foreground_segmentation/blob/zrene/stateForResults/notebooks/visual_results.ipynb)

## Commands to reproduce non timestamp training
```bash
#PSP - DEPTH
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_with_depth.py --model_name PSP --name_prefix "PSP_VICON_ONLY_SEMSEG_BALANCED" --loss_balanced True --train_path "/cluster/scratch/zrene/vicon_dataset/rotated" --batch_size 8 --backbone resnet34 --output_path "/cluster/scratch/zrene/outputs/results" --use_consistency_loss False --depth_weigth 0

#DEEPLAB - DEPTH
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_with_depth.py --model_name DEEPLAB --name_prefix "DEEPLAB_ONLY_SEMSEG_BALANCED" --loss_balanced True --train_path "/cluster/scratch/zrene/vicon_dataset/rotated" --batch_size 4 --backbone xception --output_path "/cluster/scratch/zrene/outputs/results" --use_consistency_loss True --depth_weigth 0 --consistency_weight 0

#PSP - CLA
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py --name_prefix "PSP_CLA_SPIX_BALANCED" --model_name PSP  --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/sp_slac" --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results"

# DEEPLAB - CLA
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py --name_prefix "DEEPLAB_CLA_FUSED_BALANCED" --model_name DEEPLAB  --backbone "xception" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --batch_size 4 --output_path "/cluster/scratch/zrene/outputs/results"

# UNET - CLA
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py  --name_prefix "UNET_CLA_FUSED_BALANCED" --model_name UNET --image_w 640 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results"

# PSP - CLA 
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py --name_prefix "PSP_CLA_WATERSHED_BALANCED" --model_name PSP  --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/watershed" --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results"

bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py --name_prefix "PSP_CLA_FUSED_BALANCED" --model_name PSP --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results"

bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py --name_prefix "PSP_CLA_FUSED_NOT_BALANCED" --model_name PSP  --backbone "resnet34" --loss_balanced False --train_path "/cluster/scratch/zrene/cla_dataset/fused" --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results"

# DEEPLAB - CLA else
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg.py --name_prefix "DEEPLAB_CLA_SPIX_BALANCED" --model_name DEEPLAB --backbone "xception" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/sp_slac" --batch_size 4 --output_path "/cluster/scratch/zrene/outputs/results"

# DEEPLAB DEPTH else
 bsub -R "rusage[mem=64000,ngpus_excl_p=1]" -R "select[gpu_model0==GeForceGTX1080Ti]"  python background_foreground_segmentation/src/train_experiments/train_sem_seg_with_depth.py --model_name DEEPLAB --name_prefix "DEEPLAB_NO_CONSISTENCY_BALANCED" --loss_balanced True --train_path "/cluster/scratch/zrene/vicon_dataset/rotated" --batch_size 4 --backbone xception --output_path "/cluster/scratch/zrene/outputs/results" --use_consistency_loss True --depth_weigth 0.25 --consistency_weight 0

bsub -R "rusage[mem=64000,ngpus_excl_p=1]" -R "select[gpu_model0==GeForceGTX1080Ti]"  python background_foreground_segmentation/src/train_experiments/train_sem_seg_with_depth.py --model_name DEEPLAB --name_prefix "DEEPLAB_FULL_STACK" --loss_balanced True --train_path "/cluster/scratch/zrene/vicon_dataset/rotated" --batch_size 4 --backbone xception --output_path "/cluster/scratch/zrene/outputs/results" --use_consistency_loss True --depth_weigth 0.25 --consistency_weight 30

# PSP DEPTH ELSE

bsub -R "rusage[mem=64000,ngpus_excl_p=1]" -R "select[gpu_model0==GeForceGTX1080Ti]"  python background_foreground_segmentation/src/train_experiments/train_sem_seg_with_depth.py --model_name PSP --name_prefix "PSP_VICON_SEMSEG_DEPTH_CONSISTENCY_BALANCED" --loss_balanced True --train_path "/cluster/scratch/zrene/vicon_dataset/rotated" --batch_size 8 --backbone resnet34 --output_path "/cluster/scratch/zrene/outputs/results" --use_consistency_loss True --consistency_weight 30 --depth_weigth 0.25
```

## Commands to reproduce timestamp training
```bash

bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 60 --name_prefix "PSP_CLA_FUSED_BALANCED_60s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 60 --name_prefix "PSP_CLA_FUSED_BALANCED_60s_pretrained_for_eval_not_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 60 --name_prefix "PSP_CLA_FUSED_BALANCED_60s_pretrained_for_eval_not_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 4 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 60 --name_prefix "PSP_CLA_FUSED_BALANCED_60s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 4 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 120 --name_prefix "PSP_CLA_FUSED_BALANCED_120s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 120 --name_prefix "PSP_CLA_FUSED_BALANCED_120s_pretrained_for_eval_not_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 170 --name_prefix "PSP_CLA_FUSED_BALANCED_170s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 170 --name_prefix "PSP_CLA_FUSED_BALANCED_170s_pretrained_for_eval_not_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 30 --name_prefix "PSP_CLA_FUSED_BALANCED_30s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 10 --name_prefix "PSP_CLA_FUSED_BALANCED_10s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 10 --name_prefix "PSP_CLA_FUSED_BALANCED_10s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 50 --name_prefix "PSP_CLA_FUSED_BALANCED_50s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 100 --name_prefix "PSP_CLA_FUSED_BALANCED_100s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 150 --name_prefix "PSP_CLA_FUSED_BALANCED_150s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 100 --name_prefix "PSP_CLA_FUSED_BALANCED_100s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 1 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 10 --name_prefix "PSP_CLA_FUSED_BALANCED_10s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 50 --name_prefix "PSP_CLA_FUSED_BALANCED_50s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 100 --name_prefix "PSP_CLA_FUSED_BALANCED_100s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 150 --name_prefix "PSP_CLA_FUSED_BALANCED_150s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 50 --name_prefix "PSP_CLA_FUSED_BALANCED_50s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 100 --name_prefix "PSP_CLA_FUSED_BALANCED_100s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 150 --name_prefix "PSP_CLA_FUSED_BALANCED_150s_pretrained_for_eval_shuffled" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle True --batch_size 8 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 10 --name_prefix "PSP_CLA_FUSED_BALANCED_10s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 1 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480  
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 100 --name_prefix "PSP_CLA_FUSED_BALANCED_100s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 1 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480   
bsub -R "rusage[mem=64000,ngpus_excl_p=1]" python background_foreground_segmentation/src/train_experiments/train_sem_seg_for_given_timestamps.py --dataset CLA --train_duration 150 --name_prefix "PSP_CLA_FUSED_BALANCED_150s_pretrained_for_eval" --model_name PSP --num_epochs 10 --backbone "resnet34" --loss_balanced True --train_path "/cluster/scratch/zrene/cla_dataset/fused" --shuffle False --batch_size 1 --output_path "/cluster/scratch/zrene/outputs/results" --image_w 720 --image_h 480
```

## Pseudo Label Evaluation
Pseudo Label Evaluation can be found [here](https://github.com/ethz-asl/background_foreground_segmentation/blob/zrene/stateForResults/notebooks/pseudo_label_eval.ipynb)
